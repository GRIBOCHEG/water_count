<html>
  <title>Установка пароля</title>
  <script type="text/javascript">
    function loginClick() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4) {
          if (this.status == 200) {
            // alert(xhttp.response);
            if (xhttp.responseText == "done") {
                window.location = "/login";
            }
            //redirect
            // window.location = xhttp.responseURL;
          } else {
            alert("bitch lasagna!");
          }
        }
      };
      xhttp.open("POST", "/user/changepass", true);
      xhttp.setRequestHeader("Content-type", "application/json");
      xhttp.send(
        JSON.stringify({
          password: document.getElementById("password").value
        })
      );
    }
  </script>
  <body>
    Укажите новый пароль
    <div>
      <div>
        <label>Пароль</label>
        <input type="password" name="password" id="password" /> <br />
      </div>
      <div><button onclick="loginClick()">Войти</button></div>
    </div>
  </body>
</html>